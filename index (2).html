<!DOCTYPE html>
<html lang="en">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous" />
    <!--<script src="./capstone.js" defer></script>-->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE-edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Registration Form</title>
    <style>
        .main-container {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .main-container-center{
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
            padding: 20px;
            border-radius: 8px;
        }
        input:not(.checkbox){
            width: 100%;
        }
        input#name:invalid {
            border: 1px solid rgb(255, 55, 0);
        }

        input#email:invalid {
            border: 1px solid rgb(255, 55, 0);
        }
    </style>
</head>

<body>
    <div class="relative flex min-h-screen flex-col justify-center overflow-hidden py-6 bg-gray-50">
        <div
            class="main-container">
            <div class="main-container-center">
                <centre>
                    <h2 class="text-3xl text-center font-bold leading-tight">Registration Form</h2>
                </centre>
                <div class="divide-y divide-gray-300/50">
                    <div class="space-y-6 py-8 text-base leading-7 text-gray-600">
                        <form action="#" id="form" onsubmit="submitForm(event)">
                            <centre> <label for="name"
                                    class=" text-md w-40 inline-block font-medium leading-5 text-gray-700 ">
                                    Name
                                </label></centre>
                            <centre> <input required type="text" id="name" name="name"
                                    class="bg-gray-100 inline-block rounded-lg shadow-md px-4 py-3 mb-5 text-base leading-6 placeholder-gray-500"
                                    placeholder="Enter full name"></br></centre>
                            <label for="email" class=" text-md w-40 inline-block font-medium leading-5 text-gray-700">
                                Email
                            </label>
                            <input required type="email" id="email" name="email"
                                class="bg-gray-100 inline-block rounded-lg shadow-md px-4 py-3 mb-5 text-base leading-6 placeholder-gray-500"
                                placeholder="Enter Email"></br>
                            <label for="Password" class="text-md w-40 inline-block font-medium leading-5 text-gray-700">
                                Password
                            </label>
                            <input required type="password" id="Password" name="Password"
                                class="bg-gray-100 inline-block rounded-lg shadow-md px-4 py-3 mb-5 text-base leading-6 placeholder-gray-500"
                                placeholder="Enter Password"></br>
                            <label for="date-of-birth"
                                class=" text-md w-40 inline-block font-medium leading-5 text-gray-700">
                                Date of Birth
                            </label>
                            <input type="date" id="date-of-birth" name="date-of-birth"
                                class="bg-gray-100 inline-block rounded-lg shadow-md px-4 py-3 mb-5 text-base leading-6 placeholder-gray-500"></br>
                            <input required type="checkbox" class="checkbox" id="acceptterms" name="acceptterms"
                                class="bg-gray-100 inline-block rounded-lg shadow-md px-4 py-3 mb-5 text-base leading-6 placeholder-gray-500">
                            <label for="acceptterms"
                                class="text-md w-40 inline-block font-medium leading-5 text-gray-700">
                                acceptTerms&conditions
                            </label></br>
                            <centre> <button type="submit"
                                    class=" bg-blue-500  text-white rounded-lg shadow-md px-4 py-3 mb-5">Submit</button>
                            </centre>

                        </form>
                        <table class="table mt-2" id="table_id">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Password</th>
                                    <th>Date of Birth</th>
                                </tr>
                            </thead>
                            <tbody id="table_body"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function submitForm(event) {
            event.preventDefault();

            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('Password').value;
            const dob = document.getElementById('date-of-birth').value;
            const acceptTerms = document.getElementById('acceptterms').checked;

            if (!emailIsValid(email)) {
                alert('Please enter a valid email address.');
                return;
            }

            const age = calculateAge(new Date(dob));
            if (age < 18 || age > 55) {
                alert('Age must be between 18 and 55.');
                return;
            }

            const tableBody = document.getElementById('table_body');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td>${name}</td>
                <td>${email}</td>
                <td>${password}</td>
                <td>${dob}</td>
            `;
            tableBody.appendChild(newRow);

            // Clear the form
            document.getElementById('form').reset();
        }

        function emailIsValid(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        function calculateAge(birthday) { // birthday is a date
            const ageDifMs = Date.now() - birthday.getTime();
            const ageDate = new Date(ageDifMs); // miliseconds from epoch
            return Math.abs(ageDate.getUTCFullYear() - 1970);
        }
    </script>
</body>

</html>
